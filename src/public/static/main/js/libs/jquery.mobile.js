var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};!function(root,doc,factory){"function"==typeof define&&define.amd?define(["jquery"],function($){return factory($,root,doc),$.mobile}):factory(root.jQuery,root,doc)}(this,document,function(jQuery,window,document){!function($,window,document){var $document,activeDocHandlers,blockMouseTriggers,blockTouchTriggers,clearResetTimer,clickBlockList,createVirtualEvent,dataPropertyName,didScroll,disableMouseBindings,disableTouchBindings,dummyMouseHandler,enableMouseBindings,enableTouchBindings,eventCaptureSupported,getClosestElementWithVirtualBinding,getNativeEvent,getSpecialEventObject,getVirtualBindingFlags,handleScroll,handleTouchEnd,handleTouchMove,handleTouchStart,hasVirtualBindings,i,lastTouchID,mouseEventCallback,mouseEventProps,mouseHookProps,nextTouchID,resetTimerID,startResetTimer,startX,startY,threshold,touchEventProps,touchTargetPropertyName,triggerVirtualEvent,virtualEventNames;for(dataPropertyName="virtualMouseBindings",touchTargetPropertyName="virtualTouchID",virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],mouseEventProps=$.event.props.concat(mouseHookProps),activeDocHandlers={},resetTimerID=0,startX=0,startY=0,didScroll=!1,clickBlockList=[],blockMouseTriggers=!1,blockTouchTriggers=!1,eventCaptureSupported=indexOf.call(document,"addEventListener")>=0,$document=$(document),nextTouchID=1,lastTouchID=0,threshold=void 0,i=void 0,getNativeEvent=function(event){for(;event&&"undefined"!=typeof event.originalEvent;)event=event.originalEvent;return event},createVirtualEvent=function(event,eventType){var i,ct,j,len,ne,oe,prop,props,t,touch;if(t=event.type,oe=void 0,props=void 0,ne=void 0,prop=void 0,ct=void 0,touch=void 0,i=void 0,j=void 0,len=void 0,event=$.Event(event),event.type=eventType,oe=event.originalEvent,props=$.event.props,t.search(/^(mouse|click)/)>-1&&(props=mouseEventProps),oe)for(i=props.length;i;)prop=props[--i],event[prop]=oe[prop];if(t.search(/mouse(down|up)|click/)>-1&&!event.which&&(event.which=1),-1!==t.search(/^touch/)&&(ne=getNativeEvent(oe),t=ne.touches,ct=ne.changedTouches,touch=t&&t.length?t[0]:ct&&ct.length?ct[0]:void 0))for(j=0,len=touchEventProps.length;len>j;)prop=touchEventProps[j],event[prop]=touch[prop],j++;return event},getVirtualBindingFlags=function(element){var b,flags,k;for(flags={},b=void 0,k=void 0;element;){b=$.data(element,dataPropertyName);for(k in b)k=k,b[k]&&(flags[k]=flags.hasVirtualBinding=!0);element=element.parentNode}return flags},getClosestElementWithVirtualBinding=function(element,eventType){var b;for(b=void 0;element;){if(b=$.data(element,dataPropertyName),b&&(!eventType||b[eventType]))return element;element=element.parentNode}return null},enableTouchBindings=function(){blockTouchTriggers=!1},disableTouchBindings=function(){blockTouchTriggers=!0},enableMouseBindings=function(){lastTouchID=0,clickBlockList.length=0,blockMouseTriggers=!1,disableTouchBindings()},disableMouseBindings=function(){enableTouchBindings()},startResetTimer=function(){clearResetTimer(),resetTimerID=setTimeout(function(){resetTimerID=0,enableMouseBindings()},$.vmouse.resetTimerDuration)},clearResetTimer=function(){resetTimerID&&(clearTimeout(resetTimerID),resetTimerID=0)},triggerVirtualEvent=function(eventType,event,flags){var ve;return ve=void 0,(flags&&flags[eventType]||!flags&&getClosestElementWithVirtualBinding(event.target,eventType))&&(ve=createVirtualEvent(event,eventType),$(event.target).trigger(ve)),ve},mouseEventCallback=function(event){var touchID,ve;touchID=$.data(event.target,touchTargetPropertyName),ve=void 0,blockMouseTriggers||lastTouchID&&lastTouchID===touchID||(ve=triggerVirtualEvent("v"+event.type,event),ve&&(ve.isDefaultPrevented()&&event.preventDefault(),ve.isPropagationStopped()&&event.stopPropagation(),ve.isImmediatePropagationStopped()&&event.stopImmediatePropagation()))},handleTouchStart=function(event){var flags,t,target,touches;touches=getNativeEvent(event).touches,target=void 0,flags=void 0,t=void 0,touches&&1===touches.length&&(target=event.target,flags=getVirtualBindingFlags(target),flags.hasVirtualBinding&&(lastTouchID=nextTouchID++,$.data(target,touchTargetPropertyName,lastTouchID),clearResetTimer(),disableMouseBindings(),didScroll=!1,t=getNativeEvent(event).touches[0],startX=t.pageX,startY=t.pageY,triggerVirtualEvent("vmouseover",event,flags),triggerVirtualEvent("vmousedown",event,flags)))},handleScroll=function(event){blockTouchTriggers||(didScroll||triggerVirtualEvent("vmousecancel",event,getVirtualBindingFlags(event.target)),didScroll=!0,startResetTimer())},handleTouchMove=function(event){var didCancel,flags,moveThreshold,t;blockTouchTriggers||(t=getNativeEvent(event).touches[0],didCancel=didScroll,moveThreshold=$.vmouse.moveDistanceThreshold,flags=getVirtualBindingFlags(event.target),didScroll=didScroll||Math.abs(t.pageX-startX)>moveThreshold||Math.abs(t.pageY-startY)>moveThreshold,didScroll&&!didCancel&&triggerVirtualEvent("vmousecancel",event,flags),triggerVirtualEvent("vmousemove",event,flags),startResetTimer())},handleTouchEnd=function(event){var flags,t,ve;blockTouchTriggers||(disableTouchBindings(),flags=getVirtualBindingFlags(event.target),ve=void 0,t=void 0,triggerVirtualEvent("vmouseup",event,flags),didScroll||(ve=triggerVirtualEvent("vclick",event,flags),ve&&ve.isDefaultPrevented()&&(t=getNativeEvent(event).changedTouches[0],clickBlockList.push({touchID:lastTouchID,x:t.clientX,y:t.clientY}),blockMouseTriggers=!0)),triggerVirtualEvent("vmouseout",event,flags),didScroll=!1,startResetTimer())},hasVirtualBindings=function(ele){var bindings,k;if(bindings=$.data(ele,dataPropertyName),k=void 0,bindings)for(k in bindings)if(k=k,bindings[k])return!0;return!1},dummyMouseHandler=function(){},getSpecialEventObject=function(eventType){var realType;return realType=eventType.substr(1),{setup:function(){var bindings;hasVirtualBindings(this)||$.data(this,dataPropertyName,{}),bindings=$.data(this,dataPropertyName),bindings[eventType]=!0,activeDocHandlers[eventType]=(activeDocHandlers[eventType]||0)+1,1===activeDocHandlers[eventType]&&$document.bind(realType,mouseEventCallback),$(this).bind(realType,dummyMouseHandler),eventCaptureSupported&&(activeDocHandlers.touchstart=(activeDocHandlers.touchstart||0)+1,1===activeDocHandlers.touchstart&&$document.bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd).bind("touchmove",handleTouchMove).bind("scroll",handleScroll))},teardown:function(){var $this,bindings;--activeDocHandlers[eventType],activeDocHandlers[eventType]||$document.unbind(realType,mouseEventCallback),eventCaptureSupported&&(--activeDocHandlers.touchstart,activeDocHandlers.touchstart||$document.unbind("touchstart",handleTouchStart).unbind("touchmove",handleTouchMove).unbind("touchend",handleTouchEnd).unbind("scroll",handleScroll)),$this=$(this),bindings=$.data(this,dataPropertyName),bindings&&(bindings[eventType]=!1),$this.unbind(realType,dummyMouseHandler),hasVirtualBindings(this)||$this.removeData(dataPropertyName)}}},$.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<virtualEventNames.length;)$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]),i++;eventCaptureSupported&&document.addEventListener("click",function(e){var i,cnt,ele,o,target,touchID,x,y;if(cnt=clickBlockList.length,target=e.target,x=void 0,y=void 0,ele=void 0,i=void 0,o=void 0,touchID=void 0,cnt)for(x=e.clientX,y=e.clientY,threshold=$.vmouse.clickDistanceThreshold,ele=target;ele;){for(i=0;cnt>i;){if(o=clickBlockList[i],touchID=0,ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold||$.data(ele,touchTargetPropertyName)===o.touchID)return e.preventDefault(),void e.stopPropagation();i++}ele=ele.parentNode}},!0)}(jQuery,window,document),function($){$.mobile={}}(jQuery),function($){var support;support={touch:indexOf.call(document,"ontouchend")>=0},$.mobile.support=$.mobile.support||{},$.extend($.support,support),$.extend($.mobile.support,support)}(jQuery),function($,window){var $document,scrollEvent,supportTouch,touchMoveEvent,touchStartEvent,touchStopEvent,triggerCustomEvent;$document=$(document),supportTouch=$.mobile.support.touch,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove",triggerCustomEvent=function(obj,eventType,event,bubble){var originalType;originalType=event.type,event.type=eventType,bubble?$.event.trigger(event,void 0,obj):$.event.dispatch.call(obj,event),event.type=originalType},$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(i,name){$.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)},$.attrFn&&($.attrFn[name]=!0)}),$.event.special.scrollstart={enabled:!0,setup:function(){var $this,scrolling,thisObject,timer,trigger;thisObject=this,$this=$(thisObject),scrolling=void 0,timer=void 0,trigger=function(event,state){scrolling=state,triggerCustomEvent(thisObject,scrolling?"scrollstart":"scrollstop",event)},$this.bind(scrollEvent,function(event){$.event.special.scrollstart.enabled&&(scrolling||trigger(event,!0),clearTimeout(timer),timer=setTimeout(function(){trigger(event,!1)},50))})},teardown:function(){$(this).unbind(scrollEvent)}},$.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var $this,isTaphold,thisObject;thisObject=this,$this=$(thisObject),isTaphold=!1,$this.bind("vmousedown",function(event){var clearTapHandlers,clearTapTimer,clickHandler,origTarget,timer;return clearTapTimer=function(){clearTimeout(timer)},clearTapHandlers=function(){clearTapTimer(),$this.unbind("vclick",clickHandler).unbind("vmouseup",clearTapTimer),$document.unbind("vmousecancel",clearTapHandlers)},clickHandler=function(event){clearTapHandlers(),isTaphold||origTarget!==event.target?isTaphold&&event.preventDefault():triggerCustomEvent(thisObject,"tap",event)},isTaphold=!1,event.which&&1!==event.which?!1:(origTarget=event.target,timer=void 0,$this.bind("vmouseup",clearTapTimer).bind("vclick",clickHandler),$document.bind("vmousecancel",clearTapHandlers),void(timer=setTimeout(function(){$.event.special.tap.emitTapOnTaphold||(isTaphold=!0),triggerCustomEvent(thisObject,"taphold",$.Event("taphold",{target:origTarget}))},$.event.special.tap.tapholdThreshold)))})},teardown:function(){$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),$document.unbind("vmousecancel")}},$.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(event){var winPageX,winPageY,x,y;return winPageX=window.pageXOffset,winPageY=window.pageYOffset,x=event.clientX,y=event.clientY,0===event.pageY&&Math.floor(y)>Math.floor(event.pageY)||0===event.pageX&&Math.floor(x)>Math.floor(event.pageX)?(x-=winPageX,y-=winPageY):(y<event.pageY-winPageY||x<event.pageX-winPageX)&&(x=event.pageX-winPageX,y=event.pageY-winPageY),{x:x,y:y}},start:function(event){var data,location;return data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data),{time:(new Date).getTime(),coords:[location.x,location.y],origin:$(event.target)}},stop:function(event){var data,location;return data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data),{time:(new Date).getTime(),coords:[location.x,location.y]}},handleSwipe:function(start,stop,thisObject,origTarget){var direction;return stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold?(direction=start.coords[0]>stop.coords[0]?"swipeleft":"swiperight",triggerCustomEvent(thisObject,"swipe",$.Event("swipe",{target:origTarget,swipestart:start,swipestop:stop}),!0),triggerCustomEvent(thisObject,direction,$.Event(direction,{target:origTarget,swipestart:start,swipestop:stop}),!0),!0):!1},eventInProgress:!1,setup:function(){var $this,context,events,thisObject;events=void 0,thisObject=this,$this=$(thisObject),context={},events=$.data(this,"mobile-events"),events||(events={length:0},$.data(this,"mobile-events",events)),events.length++,events.swipe=context,context.start=function(event){var emitted,origTarget,start,stop;$.event.special.swipe.eventInProgress||($.event.special.swipe.eventInProgress=!0,stop=void 0,start=$.event.special.swipe.start(event),origTarget=event.target,emitted=!1,context.move=function(event){start&&!event.isDefaultPrevented()&&(stop=$.event.special.swipe.stop(event),emitted||(emitted=$.event.special.swipe.handleSwipe(start,stop,thisObject,origTarget),emitted&&($.event.special.swipe.eventInProgress=!1)),Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold&&event.preventDefault())},context.stop=function(){emitted=!0,$.event.special.swipe.eventInProgress=!1,$document.off(touchMoveEvent,context.move),context.move=null},$document.on(touchMoveEvent,context.move).one(touchStopEvent,context.stop))},$this.on(touchStartEvent,context.start)},teardown:function(){var context,events;events=void 0,context=void 0,events=$.data(this,"mobile-events"),events&&(context=events.swipe,delete events.swipe,events.length--,0===events.length&&$.removeData(this,"mobile-events")),context&&(context.start&&$(this).off(touchStartEvent,context.start),context.move&&$document.off(touchMoveEvent,context.move),context.stop&&$document.off(touchStopEvent,context.stop))}},$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,$.noop)},teardown:function(){$(this).unbind(sourceEvent)}}})}(jQuery,this)});